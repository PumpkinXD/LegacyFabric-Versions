<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LegacyFabric Versions</title>

    <link rel="stylesheet" href="./index.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/gradle.min.js"></script>

    <script src="./index.js" type="module" defer></script>
</head>

<body>
    <div id="page-info">
        <h1 id="title">Legacy-Fabric Latest Versions</h1>

        <a href="https://legacyfabric.net/discord" target="_blank" rel="noopener noreferrer">
            <img alt="Legacy-Fabric Discord Server" src="https://img.shields.io/discord/679635419045822474.svg?label=discord">
        </a>
        <a href="https://github.com/Legacy-Fabric/yarn" target="_blank" rel="noopener noreferrer">
            <img alt="Legacy-Fabric Yarn GitHub stars" src="https://img.shields.io/github/stars/Legacy-Fabric/yarn.svg?label=Yarn&style=social">
        </a>
        <a href="https://github.com/Legacy-Fabric/fabric" target="_blank" rel="noopener noreferrer">
            <img alt="Legacy-Fabric API GitHub stars" src="https://img.shields.io/github/stars/Legacy-Fabric/fabric.svg?label=Fabric&style=social">
        </a>
    </div>

    <p>Minecraft Version:
        <select name="versions" id="versions"></select>
    </p>

    <h3>build.gradle</h3>
    <div name="code">
        <pre><code class="gradle" id="build-gradle-code"></code></pre>
    </div>

    <h3>gradle.properties</h3>
    <div name="code">
        <pre><code class="properties" id="gradle-properties-code"></code></pre>
    </div>

    <br>
    <hr>

    <h2>Mappings Migration</h2>
    <p>Mappings can be auto updated by using the following command.
        See the <a href="https://fabricmc.net/wiki/tutorial:migratemappings">wiki page</a> for more help.
    </p>

    <div>
        <span style="vertical-align:top; font-weight: bolder; color: firebrick;">NOTE:</span>
        <div style="display: inline-block;">
            <p style="margin: 0px;">The yarn group recently changed from
                <code class="gradle" style="color: brown;">"net.fabric:yarn"</code> to
                <code class="gradle" style="color: brown;">"net.legacyfabric:yarn"</code>
            </p>
            <p style="margin: 0px;">Make sure to update your build script!</p>
        </div>
    </div>

    <div name="code">
        <pre><code class="bash">gradlew migrateMappings --mappings "{yarn_version}"</code></pre>
    </div>
</body>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        document.getElementById('build-gradle-code').innerHTML = [
            'dependencies {',
            '    minecraft "com.mojang:minecraft:{minecraft_version}"',
            '    mappings "net.legacyfabric:yarn:{yarn_version}:v2"',
            '    modImplementation "net.fabricmc:fabric-loader:{loader_version}"',
            '',
            '    // Legacy-Fabric API',
            '    modImplementation "{fabric_maven}{fabric_version}"',
            '}',
        ].join('\n');
        document.getElementById('gradle-properties-code').innerHTML = [
            'minecraft_version={minecraft_version}',
            'yarn_mappings={yarn_version}',
            'loader_version={loader_version}',
            '',
            '# Legacy-Fabric API',
            'fabric_version={fabric_version}',
        ].join('\n');
        document.querySelectorAll('code').forEach((block) => {
            hljs.highlightBlock(block);
        });
    });
</script>

</html>